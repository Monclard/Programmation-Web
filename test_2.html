<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>Module Web TP2</title>
    <style>
      #animatedElem
      {
        position: relative;
        left:0px;
        
        width:42px;
      	height:42px;
      	background-color:red;
      }
    </style>
  </head>
  <body>
    <div id="animatedElem"> 
    </div>
  </body>
  <script type="text/javascript">
    var elem = document.getElementById("animatedElem");
    var left = 0;
    var vitesse = 100;//px/s
    var timer;
    // Move the element 10px on the right every 16ms
    function pausecomp(millis) 
    {
    	var date = new Date();
    	var curDate = null;
    	do
      { 
    		curDate = new Date(); 
    	}
      while(curDate-date < millis);
    }
        
    timer = setInterval(function()
    {
    	// clear the timer at 400px to stop the animation
      var dateAvant = new Date();
      var dateApres=null;
      pausecomp(16);
      dateApres = new Date();
      
      var temp = (dateApres-dateAvent)/1000.0;//temps en s
      var deplacement = vitesse * temp;
      elem.style.left = parseInt((400 - ( left += deplacement ))) + "px";
      
    	if ( left > 400 )
      {
    		clearInterval( timer );
    	}
    }, 16);
  </script>
</html>
